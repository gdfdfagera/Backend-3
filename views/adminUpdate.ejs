<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="adminPanel.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="/public/css/admin.css">
</head>
<body>
    <nav class="navbar">
        <div class="logo">Assignment 3</div>
      <ul class="nav-links">
        <li><a href="/login">Logout</a></li>
      </ul>
    </nav>


    <main>
        <div id="crud">
            <ul>
                <li><a href="/admin" class="cud">Add user</a></li>
                <li><a href="/adminUpdate" class="cud">Update user</a></li>
                <li><a href="/adminDelete" class="cud">Delete user</a></li>
            </ul>
        </div>
        <div id="concrete2">
            <% if (users && users.length > 0) { %>
                <% users.forEach(user => { %>
                    <% if (user.deletionDate === null){ %>
                    <div class="user-card">
                        <form action="/adminUpdate" method="post" id="update">
                            <input type="text" name="id" value="<%= user._id %>" style="display: none;">
                            <input type="text" name="createD" value="<%= user.creationDate %>" style="display: none;">
                            <input type="text" name="deleteD" value="<%= user.deletionDate %>" style="display: none;">
                            <h3>
                                <input type="text" name="username" value="<%= user.username %>" />
                            </h3>
                            <p>Password: 
                                <input type="text" name="password" value="<%= user.password %>" />
                            </p>
                            <p>Creation date: <%= user.creationDate %></p>
                            <p>Update date: <%= user.updateDate || 'there was no any update' %></p>
                            <p>Deletion date: <%= user.deletionDate || 'there was no any delete'  %></p>
                            <p>Is admin: 
                                <input type="checkbox" name="isAdmin" <% if (user.isAdmin) { %>checked<% } %> />
                            </p>
                            <button type="submit">Save Changes</button>
                        </form>
                    </div>
                    <% } %>
                <% }) %>
            <% } else { %>
                <p>No users found.</p>
            <% } %>
        </div>
        
    </main>


    <footer class="bg-body-tertiary text-center text-lg-start">
        <div class="text-center p-3" style="background-color: rgb(201, 196, 196);">
          Gainatulin Dias
          SE-2205
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>
